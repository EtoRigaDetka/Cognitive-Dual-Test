# Когнитивный Двойной Тест

Веб-приложение, разработанное для проведения психологического исследования в рамках бакалаврской работы. Цель исследования — оценка рабочей памяти и точности воспроизведения воспоминаний с помощью двух тестов: теста на запоминание цифровых последовательностей (Digit Span) и теста на точность запоминания деталей изображений.

## Обзор

Приложение проводит пользователя через комплексное тестирование, состоящее из нескольких этапов. Сначала собирается базовая демографическая информация, затем последовательно проводятся два когнитивных теста. Все результаты, включая ответы на каждый вопрос и демографические данные, собираются и отправляются в Google Таблицу для дальнейшего анализа.

Весь интерфейс полностью двуязычный (латышский и русский) для удобства участников.

---

## Ключевые особенности

- **Двуязычный интерфейс:** Полная поддержка латышского (LV) и русского (RU) языков с возможностью переключения в любой момент.
- **Сбор информации о пользователе:** Форма для ввода возраста, пола и (необязательно) электронной почты.
- **Часть 1: Тест на запоминание цифр (Digit Span Test):**
    - **Прямой и обратный счёт:** Тест разделён на два этапа — запоминание последовательности в прямом и обратном порядке.
    - **Две версии последовательностей:** Используются два заранее определённых набора цифр для каждого уровня сложности. При первой ошибке участнику предлагается вторая попытка с альтернативной последовательностью цифр той же длины.
    - **Адаптивная логика:** Тест для каждой части (прямой или обратной) автоматически завершается, если участник допускает две ошибки подряд на одном уровне сложности, или успешно проходит все предложенные последовательности.
- **Часть 2: Тест на точность воспроизведения памяти:**
    - **Запоминание изображений:** Участнику на 30 секунд показывается одно из пяти изображений.
    - **Вопросы с вариантами ответов:** После просмотра изображения необходимо ответить на 8 вопросов, касающихся его деталей.
    - **Оценка уверенности:** Для каждого ответа участник также указывает степень своей уверенности.
- **Отправка данных:**
    - Все собранные данные (информация об участнике, результаты обоих тестов) отправляются в Google Таблицу с помощью Google Apps Script.
    - Реализована обработка успешной отправки и ошибок, с возможностью повторной попытки.

---

## Механика работы Digit Span Test

Этот тест оценивает рабочую память и состоит из двух последовательных этапов:

1.  **Прямой счёт:** Участник должен воспроизвести последовательность цифр в том же порядке, в котором они были показаны.
2.  **Обратный счёт:** Участник должен воспроизвести последовательность цифр в обратном порядке.

**Логика работы теста:**

-   **Два набора последовательностей:** Для каждого уровня сложности (длины последовательности) существует два уникальных набора цифр — «Версия 1» и «Версия 2».
-   **Начало теста:** Тест всегда начинается с самой короткой последовательности из набора «Версия 1».
-   **При правильном ответе:** Если участник вводит правильную последовательность, он переходит на следующий уровень сложности (более длинная последовательность) и ему снова предлагается «Версия 1».
-   **При первой ошибке:** Если участник допускает ошибку, ему предоставляется вторая попытка на **том же уровне сложности**. Однако для этой попытки используется альтернативная последовательность из набора «Версия 2». Это гарантирует, что участник не сможет просто запомнить первую последовательность.
-   **При второй ошибке подряд:** Если участник снова допускает ошибку (уже на «Версии 2»), тест для данной части (прямой или обратный счёт) завершается, и система фиксирует максимальную успешно пройденную длину.
-   **Завершение:** Тест также считается завершённым, если участник успешно проходит все предложенные последовательности.

---

## Структура проекта

Проект построен на React и TypeScript с использованием Tailwind CSS для стилизации.

- `index.html`: Главная HTML-страница, точка входа в приложение.
- `index.tsx`: Корневой файл React, где приложение монтируется в DOM.
- `App.tsx`: Основной компонент приложения, который управляет состоянием, сменой этапов теста и передачей данных между компонентами.
- `constants.ts`: Содержит все статические данные: ссылки на изображения, вопросы для тестов, а также тексты интерфейса на двух языках (LV и RU).
- `types.ts`: Определяет все TypeScript-типы и интерфейсы, используемые в проекте (например, `UserInfo`, `DigitSpanResult`, `QuizAnswer`).
- `services/apiService.ts`: Сервис для взаимодействия с внешним API. Содержит функцию `saveResults` для отправки данных в Google Apps Script.
- **`components/`**: Папка со всеми React-компонентами:
    - `WelcomeScreen.tsx`: Приветственный экран и форма сбора данных.
    - `DigitSpanTest.tsx`: Компонент для теста на запоминание цифр (прямой и обратный).
    - `MemoryTest.tsx`: Компонент для теста на запоминание изображений.
    - `Quiz.tsx`: Компонент для отображения вопросов и ответов в тесте с изображениями.
    - `FinalScreen.tsx`: Экран для подтверждения отправки результатов.
    - `LanguageSwitcher.tsx`: Компонент для переключения языка.
    - `TestProgress.tsx`: Индикатор прогресса, показывающий текущую часть теста.
    - `shared/Button.tsx`: Переиспользуемый компонент кнопки.

---

## Настройка бэкенда (Google Apps Script)

Для сбора данных приложение использует веб-приложение на базе Google Apps Script, которое принимает POST-запросы и записывает данные в Google Таблицу.

1.  **Создайте Google Таблицу** для хранения результатов.
2.  **Откройте редактор скриптов** (`Расширения` -> `Apps Script`).
3.  **Вставьте код скрипта** (см. файл `code.gs`, если он есть в вашем проекте, или используйте предоставленный вам скрипт) в редактор.
4.  **Укажите ID вашей таблицы** в переменной `SHEET_ID` внутри скрипта.
5.  **Разверните скрипт как веб-приложение:**
    - Нажмите `Развертывание` -> `Новое развертывание`.
    - В настройках выберите тип "Веб-приложение".
    - В поле "Кто имеет доступ" выберите "Все".
    - Нажмите "Развернуть" и скопируйте полученный URL веб-приложения.
6.  **Вставьте скопированный URL** в константу `SCRIPT_URL` в файле `services/apiService.ts`.

Теперь приложение готово к сбору и сохранению результатов.