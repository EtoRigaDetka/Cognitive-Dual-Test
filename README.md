# Когнитивный Двойной Тест

Веб-приложение для проведения психологического исследования, направленного на оценку рабочей памяти и точности воспроизведения воспоминаний. Проект разработан в рамках бакалаврской работы и включает в себя два когнитивных теста: тест на запоминание цифровых последовательностей (Digit Span) и тест на запоминание деталей изображений.

---

## Оглавление

- [О проекте](#о-проекте)
- [Ключевые возможности](#ключевые-возможности)
- [Технологический стек](#технологический-стек)
- [Начало работы](#начало-работы)
- [Механика тестов](#механика-тестов)
  - [Часть 1: Тест на запоминание цифр (Digit Span)](#часть-1-тест-на-запоминание-цифр-digit-span)
  - [Часть 2: Тест на точность воспроизведения памяти](#часть-2-тест-на-точность-воспроизведения-памяти)
- [Структура проекта](#структура-проекта)
- [Настройка бэкенда (Google Apps Script)](#настройка-бэкенда-google-apps-script)

---

## О проекте

Приложение проводит участника через комплексное двухэтапное тестирование. Процесс начинается со сбора базовой демографической информации, после чего участник последовательно проходит два когнитивных теста. Интерфейс полностью двуязычный (латышский и русский), обеспечивая доступность для широкой аудитории. Все результаты, включая демографические данные, детали каждого испытания и ответы на вопросы, собираются и автоматически отправляются в Google Таблицу для последующего анализа.

## Ключевые возможности

- **Полностью двуязычный интерфейс:** Поддержка латышского (LV) и русского (RU) языков с возможностью переключения в любой момент.
- **Двухэтапное когнитивное тестирование:** Комбинация двух тестов для комплексной оценки когнитивных функций.
- **Адаптивный тест на запоминание цифр:** Сложность теста адаптируется под возможности участника.
- **Тест на запоминание деталей изображений:** Оценка визуальной памяти и способности воспроизводить детали.
- **Оценка уверенности:** Участники оценивают степень уверенности в своих ответах, предоставляя дополнительные данные для анализа.
- **A/B тестирование:** Система случайным образом делит участников на две группы (`v1` и `v2`). Группа `v2` получает мгновенную обратную связь после каждого ответа в тесте с изображениями, что позволяет исследовать влияние фидбека на процесс.
- **Сбор и отправка результатов:** Все данные безопасно передаются в Google Таблицу через Google Apps Script.

## Технологический стек

- **Frontend:** React, TypeScript, Tailwind CSS
- **Backend:** Google Apps Script
- **База данных:** Google Sheets
- **Развертывание:** Статические файлы (HTML, JS), зависимости загружаются через CDN.

---

## Начало работы

Проект не требует сложной сборки или установки зависимостей, так как все скрипты загружаются через CDN.

1.  **Настройте бэкенд:** Следуйте инструкциям в разделе [Настройка бэкенда (Google Apps Script)](#настройка-бэкенда-google-apps-script). Это обязательный шаг для сохранения результатов.
2.  **Запустите приложение:** Откройте файл `index.html` в любом современном веб-браузере.

---

## Механика тестов

### Часть 1: Тест на запоминание цифр (Digit Span)

Этот тест оценивает рабочую память и состоит из двух этапов:

1.  **Прямой счёт:** Воспроизвести последовательность цифр в том же порядке.
2.  **Обратный счёт:** Воспроизвести последовательность цифр в обратном порядке.

**Логика работы:**
-   **Два набора последовательностей:** Для каждого уровня сложности (длины последовательности) существует два уникальных набора цифр — «Версия 1» и «Версия 2».
-   **Начало:** Тест всегда начинается с самой короткой последовательности из набора «Версия 1».
-   **Правильный ответ:** Участник переходит на следующий уровень сложности (более длинная последовательность) и снова получает «Версию 1».
-   **Первая ошибка:** Участнику дается вторая попытка на **том же уровне сложности**, но с использованием альтернативной последовательности из набора «Версия 2».
-   **Вторая ошибка подряд:** Если участник снова ошибается (уже на «Версии 2»), тест для данной части (прямой или обратный счёт) завершается.
-   **Завершение:** Этап считается завершённым, если участник успешно проходит все уровни или допускает две ошибки подряд на одном уровне.

### Часть 2: Тест на точность воспроизведения памяти

Этот тест оценивает способность запоминать и воспроизводить визуальные детали.

1.  **Просмотр:** Участнику на 30 секунд показывается одно из пяти изображений.
2.  **Опрос:** После просмотра необходимо ответить на 8 вопросов с вариантами ответов, касающихся деталей изображения.
3.  **Оценка уверенности:** После каждого ответа участник указывает степень своей уверенности по 4-балльной шкале.
4.  **Обратная связь (A/B тест):** Участникам версии `v2` после выбора ответа показывается короткое сообщение-фидбек (например, "Супер!" или "Спасибо за ответ."). Участники версии `v1` фидбек не получают.

---

## Структура проекта

```
/
├── index.html                # Точка входа в приложение
├── index.tsx                 # Корневой файл React
├── App.tsx                   # Главный компонент, управляющий состоянием и логикой тестов
├── constants.ts              # Все статические данные (тексты, изображения, вопросы)
├── types.ts                  # Определения типов TypeScript
├── services/
│   └── apiService.ts         # Логика отправки данных в Google Apps Script
├── components/
│   ├── WelcomeScreen.tsx       # Экран приветствия и форма сбора данных
│   ├── DigitSpanTest.tsx     # Компонент теста на запоминание цифр
│   ├── MemoryTest.tsx        # Компонент теста на запоминание изображений
│   ├── Quiz.tsx              # Компонент для вопросов и ответов
│   ├── FinalScreen.tsx       # Финальный экран для отправки результатов
│   ├── LanguageSwitcher.tsx  # Переключатель языка
│   ├── TestProgress.tsx      # Индикатор прогресса теста
│   └── shared/
│       └── Button.tsx        # Переиспользуемый компонент кнопки
├── google-apps-script.md     # Код для Google Apps Script
└── README.md                 # Документация проекта
```

---

## Настройка бэкенда (Google Apps Script)

Для сбора данных используется веб-приложение на Google Apps Script, которое записывает результаты в Google Таблицу.

1.  **Создайте Google Таблицу** для хранения результатов. Скопируйте её ID из URL (например, `.../spreadsheets/d/THIS_IS_THE_ID/edit`).
2.  В вашей таблице откройте редактор скриптов через меню **Расширения** -> **Apps Script**.
3.  **Вставьте код** из файла `google-apps-script.md` в редактор, заменив стандартный код.
4.  **Укажите ID вашей таблицы** в переменной `SHEET_ID` внутри скрипта:
    ```javascript
    const SHEET_ID = 'ВАШ_ID_ТАБЛИЦЫ';
    ```
5.  **Разверните скрипт как веб-приложение:**
    - Нажмите **Развертывание** -> **Новое развертывание**.
    - В настройках выберите тип **Веб-приложение**.
    - В поле "Кто имеет доступ" выберите **Все**.
    - Нажмите **Развернуть** и предоставьте необходимые разрешения.
    - Скопируйте полученный **URL веб-приложения**.
6.  **Вставьте скопированный URL** в константу `SCRIPT_URL` в файле `services/apiService.ts`:
    ```javascript
    const SCRIPT_URL = 'ВАШ_URL_ВЕБ_ПРИЛОЖЕНИЯ';
    ```

**Важно:** После каждого изменения в коде Google Apps Script необходимо создавать **новое развертывание**, чтобы изменения вступили в силу.
